/* 
	checknet plugin for jQuery by Tom Riley
	v1.3 Aug 2012
	http://tomriley.net
	http://3rdwavemedia.com
*/

(function(a){a.fn.checknet=function(b){function c(){if(document.hidden||document.mozHidden||document.webkitHidden||document.msHidden){window.checknet.windowIsActive=false}else{window.checknet.windowIsActive=true}}function d(){if(!a("#netWarn").length){a("body").prepend('<p id="netWarn">'+checknet.config.warnMsg+"</p>");a("#netWarn").fadeIn("fast")}a('input[type="submit"]').attr("disabled","disabled").addClass("tempDisabled")}function e(){if(a("#netWarn").length){a("#netWarn").fadeOut("fast",function(){a(this).remove()})}a(".tempDisabled").removeAttr("disabled").removeClass("tempDisabled")}function f(b){if(window.checknet.windowIsActive){a.ajax({url:b,cache:false,success:function(){window.checknet.conIsActive=true},error:function(){window.checknet.conIsActive=false},complete:function(){if(window.checknet.conIsActive){e()}else{d()}}})}}if(typeof b==="undefined"){b={}}if(typeof b.checkInterval==="undefined"){b.checkInterval=5}if(typeof b.warnMsg==="undefined"){b.warnMsg="No Internet connection detected, disabled features will be re-enabled when a connection is detected. "}if(typeof b.checkURL==="undefined"){b.checkURL='itncheck.php'}else if(b.checkURL.indexOf("http")===-1){b.checkURL="http://"+b.checkURL}b.checkInterval=b.checkInterval*1e3;window.checknet={windowIsActive:true,conIsActive:true,config:b};if(typeof document.hidden!=="undefined"){document.addEventListener("visibilitychange",c)}else if(typeof document.webkitHidden!=="undefined"){document.addEventListener("webkitvisibilitychange",c)}else if(typeof document.mozHidden!=="undefined"){document.addEventListener("mozvisibilitychange",c)}else if(typeof document.msHidden!=="undefined"){document.addEventListener("msvisibilitychange",c)}setInterval(function(){f(window.checknet.config.checkURL)},window.checknet.config.checkInterval)}})(jQuery)